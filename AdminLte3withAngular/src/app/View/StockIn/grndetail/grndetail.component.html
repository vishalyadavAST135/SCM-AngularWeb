<style>
  .table th,
  .table td {
    padding: 10px 4px 10px 4px;
    vertical-align: top;
    border-top: 1px solid #dee2e6;
  }

  .table thead th {
    border-bottom: 2px solid #dee2e6;
    text-align: center;
    font-size: smaller;
  }

  .btn-sm1,
  .btn-group-sm>.btn {
    padding: 0.25rem 0.5rem;
    font-size: 0.875rem;
    line-height: 0.5;
    border-radius: 0.2rem;
  }

  .Mandatoryfield {
    font-size: 15px
  }

  .hide {
    display: none;
  }
</style>
<div class="wrapper">
  <app-main-header></app-main-header>
  <!-- Main Sidebar Container -->
  <app-main-sidebar></app-main-sidebar>
  <ngx-spinner bdColor="rgba(51, 51, 51, 0.8)" size="default" type="ball-spin-clockwise">
    <p style="color: white">Please Wait. </p>
  </ngx-spinner>
  <div class="content-wrapper" style="min-height: 54.0312px; background-color: white;">
    <!-- Content Header (Page header) -->
    <div class="content-header bg-light">
      <div class="container-fluid">
        <div class="row">
          <div class="col-xs-12">
            <nav aria-label="breadcrumb">
              <ol class="breadcrumb">
                <li class="breadcrumb-item"><a href="/dashboard">Home</a></li>
                <li *ngIf="!IsPageActive"class="breadcrumb-item active">WH Management / GRN </li>
                <li *ngIf="IsPageActive"class="breadcrumb-item active">WH Management / STN </li>
              </ol>
            </nav>
          </div>
        </div>
      </div>
    </div>
    <!-- /.content-header -->

    <section class="content" style="padding-top:2px;">
      <div class="container-fluid">
          <!-- GRN Front Page -->
        <div class="row" *ngIf="isShownPOList" id="DivGRNList">
          <div class="col-sm-12">

            <app-search-panel [IsHiddenSearchCustomer]="IsHiddenSearchCustomer"></app-search-panel>
            <div class="row mb-1" style="margin-left:3px">
              <div class="col-sm-1">
                <label class="col-form-label-xs"> PO No</label>
              </div>
              <div class="col-sm-2">
                <div class="ng-autocomplete">
                  <ng-autocomplete [data]="AutoCompletePOList" [searchKeyword]="keyword"
                    (inputCleared)="searchCleared()" (selected)='SearchPanelPo($event)'
                    (inputChanged)='onChangeSearch($event,0)' (inputFocused)='onFocused($event)'
                    [itemTemplate]="itemTemplate" [notFoundTemplate]="notFoundTemplate" [debounceTime]="600"
                    [minQueryLength]="2" placeHolder="Search Po No..">
                  </ng-autocomplete>
                  <ng-template #itemTemplate let-item>
                    <a [innerHTML]="item.PoName"></a>
                  </ng-template>
                  <ng-template #notFoundTemplate let-notFound>
                    <div [innerHTML]="notFound"></div>
                  </ng-template>
                </div>
              </div>

              <div class="col-sm-1">
                <label class="col-form-label-xs"> GRN No</label>
              </div>
              <div class="col-sm-2">
                <input type="text" id="txtGRNNo" [(ngModel)]="model.GRNNo" class="form-control form-control-sm"
                  placeholder="">
              </div>
              <div class="col-sm-1">
                <label class="col-form-label-xs">Inv/Challan No</label>
              </div>
              <div class="col-sm-2">
                <input type="text" id="txtInvoiceNo" [(ngModel)]="model.InvoiceNo" class="form-control form-control-sm"
                  placeholder="">

              </div>
              <div class="col-sm-1">
                <label class="col-form-label-xs">GRN/STN</label>
              </div>
              <div class="col-sm-2">
                <select class="form-control form-control-sm" id="txtVoucher" [(ngModel)]="model.GRNSTNId">
                  <option class="dropdown-item" [value]="0">Select</option>
                  <option class="dropdown-item" [value]="1">GRN</option>
                  <option class="dropdown-item" [value]="4">STN</option>
                  <option class="dropdown-item" [value]="18">Job No (Vendor)</option>
                  <option class="dropdown-item" [value]="20">Job No (AST)</option>
                </select>
              </div>
              <!-- <div class="col-sm-2">                             
                    <select class="form-control form-control-sm"id="txtVoucher"  [(ngModel)]="model.VoucherTypeId" >
                      <option class="dropdown-item" [value]="0">Select</option>
                      <option *ngFor="let item of VoucherTypeDetail" [value]="item.id" >{{item.itemName}}</option>
                  </select>
                   </div> -->
            </div>
            <div class="row mb-1" style="margin-left:3px">

              <div class="col-sm-1">
                <label class="col-form-label-xs">Active/Cancel</label>
              </div>
              <div class="col-sm-2">
                <select class="form-control form-control-sm" id="txtVoucher" [(ngModel)]="model.ddlActive">
                  <option class="dropdown-item" [value]="2">Select</option>
                  <option class="dropdown-item" [value]="1">Active</option>
                  <option class="dropdown-item" [value]="0">Cancel</option>
                </select>
              </div>
              <!-- <div class="col-sm-2">                             
                  <select class="form-control form-control-sm"id="txtVoucher"  [(ngModel)]="model.VoucherTypeId" >
                    <option class="dropdown-item" [value]="0">Select</option>
                    <option *ngFor="let item of VoucherTypeDetail" [value]="item.id" >{{item.itemName}}</option>
                </select>
                 </div> -->
            </div>


            <div class="row" style="margin-left:3px">
              <div class="col-12 col-sm-6 col-md-2">
                <div class="info-box1" style="background-color:#1dd847c7">
                  <div class="info-box-content">
                    <!-- <label class="col-sm-12" style="text-align:center;color:white"><b> Annexure (Excel)</b></label> -->
                    <span class="" style="color:white;margin-left:15px"><b>New GRN</b>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                      <b>{{this.NewGRN}}</b></span>
                  </div>
                </div>
              </div>
              <div class="col-12 col-sm-6 col-md-2">
                <div class="info-box1" style="background-color:#ec7d20fa">
                  <div class="info-box-content">
                    <!-- <span class="info-box-text">Amended PO</span> -->
                    <span class="" style="color:white;margin-left:15px"><b>Update GRN</b>&nbsp;&nbsp;&nbsp;&nbsp;
                      <b>{{this.UpdateGRN}}</b></span>
                  </div>

                </div>
              </div>
              <div>
                <div>
                  <button type="button" class="btn btn-sm1 btn-success" (click)="SearchGRNHistoryCountList()"><i
                      class="fa fa-search" aria-hidden="true"></i> Summary</button>
                </div>

              </div>
            </div>
            <span></span>
            <div class="row">
              <div class="col-sm-12" style="background-color:#28a745;">
                <div class="btn-group btn-group-sm">
                  <button type="button" *ngIf="ObjUserPageRight.IsSearch" class="btn btn-success" (click)="SearchGRNList()"><i class="fa fa-search"
                      aria-hidden="true"></i> Search</button>
                  <button type="button" *ngIf="ObjUserPageRight.IsExport" class="btn btn-success" (click)="GRNExcelExport()"><i class="fa fa-download"
                      aria-hidden="true"></i> Excel Export<i class="fa fa-spinner fa-spin"
                      *ngIf="Exportloading"></i></button>
                  <button type="button" *ngIf="ObjUserPageRight.IsCreate" class="btn btn-success" (click)="CreateNewGRNCRN()"><i class="fa fa-plus"></i>
                    GRN</button>
                  <button type="button" *ngIf="ObjUserPageRight.IsBulkPdfDwnload" class="btn btn-success" (click)="DownloadAllPdfZip()"><i
                      class="fa fa-download"></i> GRN File</button>
                </div>

              </div>
            </div>
          </div>
          <div class="col-sm-12">
            <div class="row">
              <ag-grid-angular style="width: 100%; height: 500px;" class="ag-theme-alpine" [enableSorting]="true"
                [enableFilter]="true" [pagination]="true" paginationPageSize="20" [columnDefs]="columnDefs"
                [multiSortKey]="multiSortKey" [tooltipShowDelay]="tooltipShowDelay" [rowData]="GridrowData"
                [frameworkComponents]="frameworkComponents" (gridReady)="onGridReady($event)"
                [overlayLoadingTemplate]="loadingTemplate">
              </ag-grid-angular>
            </div>
          </div>
        </div>
         <!-- GRN Back End Page -->
        <div class="row" *ngIf="isShownPOEdit" id="DivPOEdit">
          <div class="col-sm-12 col-md-12">
            <div class="card card-success">
              <div class="card-body">
                <div class="alert alert-danger" *ngIf="IsError" role="alert">
                  <strong>Error!</strong> {{errorMessage}}
                </div>
                <div class="alert alert-success" *ngIf="IsSuccess" role="alert">
                  {{succesMessage}}
                </div>
                <div class="row mb-1">
                  <div class="col-sm-12 content-header bg-light">
                    <div class="col-sm-12">
                      <button type="submit" class="btn btn-sm btn-success" (click)="GRNCRNDetailBack()"><i
                          class="fa fa-arrow-circle-left"></i> Back </button>
                      &nbsp; <button type="submit" *ngIf="ObjUserPageRight.IsCreate" class="btn btn-sm btn-success" (click)="CreateNewGRNCRN()"><i
                          class="fa fa-plus"></i>
                        New </button>
                      &nbsp; <button type="submit" *ngIf="ObjUserPageRight.IsCreate" class="btn btn-sm btn-success"
                        (click)="IsPageActive=true; isShownPOEdit=false"><i class="fa fa-save"></i>
                        New STN </button>
                      &nbsp; <button type="submit"  *ngIf="Save"[disabled]="IsSaveButtonDisable" class="btn btn-sm btn-success"
                        (click)="conformPopup()"><i class="fa fa-save"></i>
                        Save </button>
                      &nbsp; <button type="submit" *ngIf="IsNewPreview" class="btn btn-sm btn-success"
                        (click)="SearchPdfPreview()"><i class="fa fa-print"></i>
                        Preview </button>
                      &nbsp; <button type="submit" *ngIf="ObjUserPageRight.IsPdfView &&IsDownloadPrintHideShow" [disabled]="IsDownloadButtonDisable"
                        class="btn btn-sm btn-success" (click)="DownloadGRNPdf()"><i class="fa fa-download"></i>
                        Download </button>
                      &nbsp; <button type="submit" *ngIf="ObjUserPageRight.IsGenPdf && IsDownloadPrintHideShow" class="btn btn-sm btn-success"
                        (click)="CreateGRNPdfData(1)">
                        Generate Pdf </button>
                      &nbsp;
                      <button type="button" *ngIf="ObjUserPageRight.IsDelete && IsHideShowCancelBtn" class="btn btn-sm btn-success" [disabled]="IsCancelButtonDisable"
                        (click)="conformCancelPopup()">Cancel GRN</button>
                      &nbsp;
                      <app-view-approvalpage [ChildApprovalList]="ApprovalList" [ManueId]="ManueId" [TableId]="TableId"
                        [CreateName]="CreateName" [CreatedDate]="CreatedDate" [ModifiedName]="ModifiedName"
                        [ModifiedDate]="ModifiedDate" [CompanyId]="CompanyId"
                        [ApprovalstatusbtnhideShow]="IsApprovalstatusbtnhideShow"></app-view-approvalpage>
                    </div>
                  </div>
                </div>

                <div class="row mb-1">
                  <div class="col-form-label-xs col-sm-1">
                    <select class="form-control form-control-sm" id="txtGRNByid" [(ngModel)]="model.GRNById"
                      (change)="ChangeGRNBy(model.GRNById)">
                      <option class="dropdown-item" value="0">Select</option>
                      <option class="dropdown-item" value="1">PO No</option>
                      <option class="dropdown-item" value="2">Job No (Vendor)</option>
                      <option class="dropdown-item" value="3">Vendor Sale</option>
                      <option class="dropdown-item" value="4">Job No (AST)</option>
                    </select>
                  </div>

                  <div class="col-sm-2">
                    <div class="ng-autocomplete" *ngIf="IsGRNByPO">
                      <ng-autocomplete [data]="AutoCompleteGRNCRNPoList" [searchKeyword]="GRNCRNkeyword"
                        (inputCleared)="searchGRNCRNCleared()" (selected)='SearchAutoPoDetailPoId($event)'
                        (inputChanged)='onChangeSearch($event,1)' (inputFocused)='onFocused($event)'
                        [(ngModel)]="model.POData" [itemTemplate]="itemGRNCRNTemplate"
                        [notFoundTemplate]="notGRNCRNFoundTemplate" [debounceTime]="1500" [minQueryLength]="2"
                        placeHolder="Search  PO.." [disabled]="IsAutoCompleteDesabled">
                      </ng-autocomplete>
                      <ng-template #itemGRNCRNTemplate let-item>
                        <a [innerHTML]="item.PoName"></a>
                      </ng-template>
                      <ng-template #notGRNCRNFoundTemplate let-notFound>
                        <div [innerHTML]="notFound"></div>
                      </ng-template>
                    </div>

                    <div class="ng-autocomplete" *ngIf="IsGRNByDispatch">
                      <ng-autocomplete [data]="AutoCompleteDocumentNoList" [searchKeyword]="DocumentNokeyword"
                        (inputCleared)="SearchDispatchCleared()" (selected)='SearchAutoPoDetailPoId($event)'
                        (inputChanged)='onChangeDispatchSearch($event)' (inputFocused)='onFocused($event)'
                        [(ngModel)]="model.DocumentNoData" [itemTemplate]="itemDocumentNoTemplate"
                        [notFoundTemplate]="notFoundDocumentNoTemplate" [debounceTime]="1500" [minQueryLength]="2"
                        [disabled]="IsAutoCompleteDesabled" placeHolder="Search Document/Tax Invoice No..">
                      </ng-autocomplete>
                      <ng-template #itemDocumentNoTemplate let-item>
                        <a [innerHTML]="item.DocumentNo"></a>
                      </ng-template>
                      <ng-template #notFoundDocumentNoTemplate let-notFound>
                        <div [innerHTML]="notFound"></div>
                      </ng-template>
                    </div>
                  </div>

                  <div class="col-sm-1"></div>
                  <div class="col-sm-2">
                    <div class="btn-group btn-group-xs">
                      <label *ngIf="IsGRNByPO"><i class="fa fa-eye" aria-hidden="true" (click)="SearchGRNCRNPO()"></i>
                        View</label>
                      <label *ngIf="IsGRNByDispatch"><i class="fa fa-eye" aria-hidden="true"
                          (click)="SearchDispatchfile()"></i> View</label>
                    </div>
                  </div>
                  <label class="col-form-label-xs col-sm-1">{{DATEType}}</label>
                  <div class="col-sm-2" *ngIf="IsGRNByPO">
                    <div class="input-group" (mouseenter)="onKeypressPoDate($event)">
                      <input class="form-control form-control-sm" id="txtPodate" name="dpPoDate"
                        [(ngModel)]="model.Podate" disabled ngbDatepicker #dPoDate="ngbDatepicker">
                      <div class="input-group-append">
                        <span class="input-group-text" (click)="dPoDate.toggle()"><i
                            class="far fa-calendar-alt"></i></span>
                      </div>
                    </div>
                  </div>
                  <div class="col-sm-2" *ngIf="IsGRNByDispatch">
                    <div class="input-group" (mouseenter)="onKeypressPoDate($event)">
                      <input class="form-control form-control-sm" id="txtPodate" name="dpPoDate"
                        [(ngModel)]="model.JobDate" disabled ngbDatepicker #dPoDate="ngbDatepicker">
                      <div class="input-group-append">
                        <span class="input-group-text" (click)="dPoDate.toggle()"><i
                            class="far fa-calendar-alt"></i></span>
                      </div>
                    </div>
                  </div>
                  <label class="col-form-label-xs col-sm-1">GRN No</label>
                  <div class="col-sm-2">
                    <input type="text" id="txtGRNCRNNo" [(ngModel)]="model.GRNCRNNo" readonly
                      class="form-control form-control-sm" placeholder="">
                  </div>
                </div>
                <div class="row mb-1">
                  <label class="col-form-label-xs col-sm-1">GRN Date<span style="color:red;"
                      class="Mandatoryfield"><b>*</b></span></label>
                  <div class="col-sm-2">
                    <div class="input-group" (mouseenter)="onKeypressGRNdate($event)">
                      <input class="form-control form-control-sm" id="txtGRNdate" [disabled]="isdisabledGrnDate"
                        name="dpGRNDate" [(ngModel)]="model.GRNdate" ngbDatepicker #dGRNDate="ngbDatepicker">
                      <div class="input-group-append">
                        <span class="input-group-text" (click)="dGRNDate.toggle()"><i
                            class="far fa-calendar-alt"></i></span>
                      </div>
                    </div>
                  </div>
                  <label class="col-form-label-xs col-sm-1">Supplier Name<span *ngIf="ValidationHideShow" style="color:red;"
                      class="Mandatoryfield"><b>*</b></span></label>
                  <div class="col-sm-2">
                    <angular2-multiselect *ngIf="!SupplierNametextBox"[data]="SearchVendorList" [(ngModel)]="selectedEditVendorItems"
                      [settings]="SingledropdownSettings" (onSelect)="onItemSelect($event)"
                      (onDeSelect)="OnEditVenItemDeSelect($event)" (onSelectAll)="onSelectAll($event)"
                      (onDeSelectAll)="onEditVenDeSelectAll($event)" (ngModelChange)="ChangeEditVendor($event)"
                      id="TxtVendorEdit" class="my-class vcode" disabled="POBasedisabled">
                    </angular2-multiselect>
                    <input type="text" id="TxtVendorEdit"  *ngIf="SupplierNametextBox" class="form-control form-control-sm" [(ngModel)]="model.VendorSupplierName">
                  </div>
                  <label class="col-form-label-xs col-sm-1">{{ChangeLabelSupplierAddress}}</label>
                  <div class="col-sm-2">
                    <textarea type="text" id="SupplierAddress" rows="1" readonly [(ngModel)]="model.SupplierAddress"
                      class="form-control form-control-sm" placeholder=""></textarea>
                  </div>

                  <label class="col-form-label-xs col-sm-1">To WH State<span style="color:red;"
                      class="Mandatoryfield"><b>*</b></span></label>
                  <div class="col-sm-2">
                    <select class="form-control form-control-sm" id="txtStateEdit" [(ngModel)]="model.EditStateId"
                      [disabled]="POBasedisabled" (change)="BindEditWHList()">
                      <option class="dropdown-item" value="0">Select</option>
                      <option *ngFor="let item of SearchStateList" [value]="item.id">{{item.itemName}}</option>
                    </select>
                  </div>
                </div>

                <div class="row mb-1">
                  <label class="col-form-label-xs col-sm-1">To WH Name<span style="color:red;"
                      class="Mandatoryfield"><b>*</b></span></label>
                  <div class="col-sm-2">
                    <select class="form-control form-control-sm" [disabled]="POBasedisabled"
                      [(ngModel)]="model.SelectedGRNCRNWH" id="txtWH"
                      (change)="BindVendorOrWhAddess('WHMaster',model.SelectedGRNCRNWH)">
                      <option class="dropdown-item" value="0">Select</option>
                      <option *ngFor="let item of GRNCRNWHList" [value]="item.id">{{item.itemName}}</option>
                    </select>
                  </div>
                  <label class="col-form-label-xs col-sm-1">WH Address</label>
                  <div class="col-sm-2">
                    <textarea type="text" id="WHAddress" [(ngModel)]="model.WHAddress" rows="1"
                      class="form-control form-control-sm" placeholder=""></textarea>
                  </div>

                  <label class="col-form-label-xs col-sm-1">EwayBill No</label>
                  <div class="col-sm-2">
                    <input type="text" [(ngModel)]="model.EwayBillNo" autocomplete="off" placeholder="Enter EwayBill No"
                      id="txtEwayBillNo" class="form-control form-control-sm" />
                  </div>
                  <label class="col-form-label-xs col-sm-1">EwayBill Date</label>
                  <div class="col-sm-2">
                    <div class="input-group">
                      <input class="form-control form-control-sm" placeholder="" [(ngModel)]="model.EwayBillDate"
                        autocomplete="off" readonly ngbDatepicker #dEwayBillDate="ngbDatepicker">
                      <div class="input-group-append">
                        <span class="input-group-text" (click)="dEwayBillDate.toggle()"><i
                            class="far fa-calendar-alt"></i></span>
                      </div>
                    </div>
                  </div>
                </div>

                <div class="row mb-1">
                  <label class="col-form-label-xs col-sm-1">Inv/Challan No.</label>
                  <div class="col-sm-2">
                    <!-- <input type="text" id="txtChallanNo" [(ngModel)]="model.ChallanNo" (keypress)="ChallanNoKeyPress()"  class="form-control form-control-sm" placeholder="">  -->
                    <select class="form-control form-control-sm" [disabled]="ChallanNodisabled"
                      [(ngModel)]="model.ddlChallanNo" (change)="ChangeInvoice(model.ddlChallanNo)">
                      <option class="dropdown-item" value="">Select</option>
                      <option class="dropdown-item" value="0">Other Invoice</option>
                      <option *ngFor="let item of InvoiceListData" [value]="item.InvoiceNo">{{item.InvoiceNo}}</option>
                    </select>
                  </div>
                  <label class="col-form-label-xs col-sm-1">Inv/Challan No.<span style="color:red;"
                      class="Mandatoryfield"><b>*</b></span></label>
                  <div class="col-sm-2">
                    <input type="text" id="txtChallanNo" autocomplete="off" [(ngModel)]="model.ChallanNo"
                      [disabled]="ChallanNodisabled" (keypress)="keyPressChallan()" class="form-control form-control-sm"
                      placeholder="">
                  </div>
                  <input type="hidden" [(ngModel)]="model.HideChallanNo" class="form-control form-control-sm"
                    placeholder="">
                  <label class="col-form-label-xs col-sm-1">Inv/Challan Date<span style="color:red;"
                      class="Mandatoryfield"><b>*</b></span></label>
                  <div class="col-sm-2">
                    <div class="input-group" (mouseenter)="onKeypressChallanDate($event)">
                      <input class="form-control form-control-sm" id="txtChallanDate" readonly name="dpChallanDate"
                        [(ngModel)]="model.ChallanDate" ngbDatepicker [disabled]="IsChallanDateDesabled"
                        #dChallanDate="ngbDatepicker">
                      <div class="input-group-append">
                        <span class="input-group-text" (click)="dChallanDate.toggle()"><i
                            class="far fa-calendar-alt"></i></span>
                      </div>
                    </div>
                  </div>

                  <label class="col-form-label-xs col-sm-1">Inv./Challan Upload<span style="color:red;"
                      class="Mandatoryfield"><b>*</b></span><a *ngIf="IsReceivingFile"
                      (click)="ReceivingViewfileClick()" title="File View" style="color:green"><i
                        class="fa fa-eye"></i></a></label>
                  <div class="col-sm-2">
                    <!-- <img  src="assets/logo.jpg" style="width:10px;height: 10px;" /> -->
                    <input type="file" id="ChallanFileimage" #ChallanfilePicker (change)="onChallanFileChange($event)"
                      class="form-control form-control-sm" accept="application/pdf, image/jpeg"
                      placeholder="Choose file">
                  </div>

                </div>


                <div class="row mb-1">
                  <!-- <label class="col-form-label-xs col-sm-1"> Inv/Challan Amt </label>
                  <div class="col-sm-2">
                    <input type="text" [(ngModel)]="model.InvoiceAmount" (keypress)="keyPressChallanAmt()"
                      id="txtInvoiceamt" autocomplete="off" appCopyPastNumFloatValue placeholder="Invoice Amount"
                      class="form-control form-control-sm" />
                  </div> -->
                  <label class="col-form-label-xs col-sm-1">Gate Entry No<span style="color:red;"
                      class="Mandatoryfield"><b>*</b></span></label>
                  <div class="col-sm-2">
                    <input type="text" id="txtGateEntryNo" autocomplete="off" (keypress)="keyPressGateEntry()"
                      [(ngModel)]="model.GateEntryNo" class="form-control form-control-sm">
                  </div>
                  <label class="col-form-label-xs col-sm-1">Gate Entry Date<span style="color:red;"
                      class="Mandatoryfield"><b>*</b></span></label>
                  <div class="col-sm-2">
                    <div class="input-group" (mouseenter)="onKeypressGateEntryDate($event)">
                      <input class="form-control form-control-sm" id="txtGateEntryDate" readonly name="dpGateEntryDate"
                        autocomplete="off" [(ngModel)]="model.GateEntryDate" ngbDatepicker
                        #dGateEntryDate="ngbDatepicker">
                      <div class="input-group-append">
                        <span class="input-group-text" (click)="dGateEntryDate.toggle()"><i
                            class="far fa-calendar-alt"></i></span>
                      </div>
                    </div>
                  </div>
                  <label class="col-form-label-xs col-sm-1">Gate Pdf/Image<span style="color:red;"
                      class="Mandatoryfield"><b>*</b></span><a *ngIf="IsGatefile" (click)="GatePdfViewfileClick()"
                      title="File View" style="color:green"><i class="fa fa-eye"></i></a></label>
                  <div class="col-sm-2">
                    <input type="file" id="GatePdfFile" #GatefilePicker (change)="onGatePdfFileChange($event)"
                      class="form-control form-control-sm" accept="application/pdf, image/jpeg"
                      placeholder="Choose file">
                  </div>

                </div>
                <div class="row mb-1">
                  <label class="col-form-label-xs col-sm-1">Dispatch Date</label>
                  <div class="col-sm-2">
                    <div class="input-group">
                      <input class="form-control form-control-sm" placeholder="" readonly
                        [(ngModel)]="model.DispatchDate" ngbDatepicker #dDispatchDate="ngbDatepicker">
                      <div class="input-group-append">
                        <span class="input-group-text" (click)="dDispatchDate.toggle()"><i
                            class="far fa-calendar-alt"></i></span>
                      </div>
                    </div>
                  </div>
                  <label class="col-form-label-xs col-sm-1">Signed GRN Pdf/Image<a *ngIf="IsGrnSignedfile"
                      (click)="GrnSignedfileClick()" title="File View" style="color:green"><i
                        class="fa fa-eye"></i></a></label>
                  <div class="col-sm-2">
                    <input type="file" id="GRNSignedDocument" #GRNSignedDocument
                      (change)="onGRNSignedDocumentfile($event)" class="form-control form-control-sm"
                      accept="application/pdf, image/jpeg" placeholder="Choose file">
                  </div>
                  <label class="col-form-label-xs col-sm-1">EwayBill Pdf/Image<a *ngIf="IsEwayBillfile"
                      (click)="EwayBillfileClick()" title="File View" style="color:green"><i
                        class="fa fa-eye"></i></a></label>
                  <div class="col-sm-2">
                    <input type="file" id="EwayBill" #EwayBillFile (change)="onEwayBillfile($event)"
                      class="form-control form-control-sm" accept="application/pdf, image/jpeg"
                      placeholder="Choose file">
                  </div>
                  <label class="col-form-label-xs col-sm-1" *ngIf="IsHideShowCancelBtn">Cancellation Reason<span
                      style="color: red;" class="Mandatoryfield"><b>*</b></span></label>
                  <div class="col-sm-2" *ngIf="IsHideShowCancelBtn">
                    <select class="form-control form-control-sm" id="txtInCaseReason" [(ngModel)]="model.InCaseReason"
                      (change)="changeCaseReason()">
                      <option class="dropdown-item" value="0">Select</option>
                      <option *ngFor="let item of CancelReasonData" [value]="item.id">{{item.ReasonName}}</option>
                    </select>
                  </div>
                </div>


                <div class="col-sm-12" style=" overflow:auto;">
                  <table id="tblOne" class="table table-striped table-bordered">
                    <thead>
                      <tr>
                        <th></th>
                        <th *ngIf="Correctioncolumnhideandshow">Correction Code<span style="color:red;" class="Mandatoryfield"><b>*</b></span></th>
                        <th>Item Name<span style="color:red;" class="Mandatoryfield"><b>*</b></span></th>
                        <th>Item Make<span style="color:red;" class="Mandatoryfield"><b>*</b></span></th>
                        <th>Part No<span style="color:red;" class="Mandatoryfield"><b>*</b></span></th>
                        <!-- <th *ngIf="ItemAddrowhideshow">Equipment Type<span style="color:red;"
                            class="Mandatoryfield"><b>*</b></span></th> -->
                            <th *ngIf="EquipmentTypeHideShow">Equipment Type<span style="color:red;"
                              class="Mandatoryfield"><b>*</b></span></th>
                        <th>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Item&nbsp;Description<span
                            class="Mandatoryfield"><b></b></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</th>
                        <th>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Sub&nbsp;Description<span
                            class="Mandatoryfield"><b></b></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</th>
                        <!-- <th>Reason Code<span class="Mandatoryfield"><b></b></span></th>
                        <th>Site ID<span class="Mandatoryfield"><b></b></span></th>
                        <th>Site Name<span class="Mandatoryfield"><b></b></span></th>
                        <th>Customer Code<span class="Mandatoryfield"><b></b></span></th> -->
                        <th>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Unit<span class="Mandatoryfield"
                            style="color:red;"><b>*</b></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</th>
                        <th *ngIf="IsHideQty">{{PoQtyLabel}}<span class="Mandatoryfield"><b></b></span></th>
                        <!-- <th *ngIf="IsHideQty">POQty<span class="Mandatoryfield"><b></b></span></th> -->
                        <th>&nbsp;&nbsp;&nbsp;{{ChangeLabelQty}}<span style="color:red;"
                            class="Mandatoryfield"><b>*</b></span>&nbsp;&nbsp;&nbsp;</th>
                        <th *ngIf="IsHideQty">&nbsp;&nbsp;&nbsp;Received&nbsp;Qty<span style="color:red;"
                            class="Mandatoryfield"><b>*</b></span>&nbsp;&nbsp;&nbsp;</th>
                        <th>&nbsp;&nbsp;&nbsp;Accepted&nbsp;(OK) &nbsp;Qty<span style="color:red;"
                            class="Mandatoryfield"><b>*</b></span>&nbsp;&nbsp;&nbsp;</th>
                        

                        <th *ngIf="IsHideQty"> Damage Qty<span class="Mandatoryfield"><b></b></span></th>
                        <th *ngIf="IsHideQty">Excess/ Short<span class="Mandatoryfield"><b></b></span></th>
                        <th>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Rate<span style="color:red;"
                            class="Mandatoryfield"><b>*</b></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</th>
                        <th vlign="center"> Basic Value<span style="color:red;" class="Mandatoryfield"><b>*</b></span>
                        </th>
                        <th vlign="center">Freight Charge <span class="Mandatoryfield"><b></b></span></th>
                        <th vlign="center">Total Amount <span class="Mandatoryfield"><b></b></span></th>
                        <th vlign="center">Taxable Amount <span class="Mandatoryfield"><b></b></span></th>
                        <th vlign="center">SGST Rate(%)<span style="color:red;" class="Mandatoryfield"><b></b></span>
                        </th>
                        <th vlign="center">SGST<span style="color:red;" class="Mandatoryfield"><b></b></span></th>
                        <th vlign="center">CGST Rate(%) <span class="Mandatoryfield"><b></b></span></th>
                        <th vlign="center">CGST<span style="color:red;" class="Mandatoryfield"><b></b></span></th>
                        <th vlign="center">IGST Rate(%)<span style="color:red;" class="Mandatoryfield"><b></b></span>
                        </th>
                        <th vlign="center">IGST<span style="color:red;" class="Mandatoryfield"><b></b></span></th>


                        <th vlign="center">TCS Rate(%)<span style="color:red;" class="Mandatoryfield"><b></b></span>
                        </th>
                        <th vlign="center">TCS<span style="color:red;" class="Mandatoryfield"><b></b></span></th>

                        <th vlign="center">Total Invoice Value<span style="color:red;"
                            class="Mandatoryfield"><b>*</b></span></th>
                            <th>&nbsp;&nbsp;&nbsp;Serial No <span class="Mandatoryfield"><b></b></span></th>
                        <!-- <th>Photo<span class="Mandatoryfield"><b></b></span></th> -->
                        
                        <th *ngIf="Correctioncolumnhideandshow">Reason<span style="color:red;" class="Mandatoryfield"><b>*</b></span></th>
                        <th *ngIf="Correctioncolumnhideandshow">Remarks<span class="Mandatoryfield"><b></b></span></th>
                        <th *ngIf="Correctioncolumnhideandshow"></th>
                      </tr>
                    </thead>
                    <tbody>
                      <tr *ngFor="let dynamic of dynamicArray; let i = index">
                        <td style="width:20px;">
                          <i class="fa fa-trash" (click)="deleteRow(i)" title="Delete"></i>
                        </td>
                        <td *ngIf="Correctioncolumnhideandshow">
                          <select style="width:80px;" class="form-control form-control-sm ItemCode" (change)="ChangeCorrectionCode(i,dynamicArray[i].IsCorrectionCodeId)" id="ddlCorrectionCodeId_{{i}}"
                            [(ngModel)]="dynamicArray[i].IsCorrectionCodeId" *ngIf="dynamicArray[i].IsCorrection">
                            <option class="dropdown-item" [value]="0">Select</option>
                            <option *ngFor="let itemC of CorrectionItemCodeList" [value]="itemC.GrnListId">Line Item
                              {{itemC.RowId+'-'+itemC.itemName}}</option>
                          </select>
                        </td>
                        <td style="width:80px;">
                          <select style="width:80px;" class="form-control form-control-sm ItemName" id="txtItemNameId_{{i}}"
                            [(ngModel)]="dynamicArray[i].ItemNameId"   (change)="ChangeEditItemName(dynamicArray[i].ItemNameId,i)">
                            <option class="dropdown-item" [value]="0">Select</option>
                            <option *ngFor="let item of ItemNameDetailData" [value]="item.id">{{item.itemName}}</option>
                          </select>
                        </td>
                        <td style="width:100px;">
                          <select style="width:100px;" class="form-control form-control-sm ItemMake"id="ddlItemMake_{{i}}"
                            [(ngModel)]="dynamicArray[i].ItemMakeId"   (change)="ChangeEditItemMake(dynamicArray[i].ItemMakeId,dynamicArray[i].ItemNameId,i)">
                            <option class="dropdown-item" [value]="0">Select</option>
                            <option *ngFor="let item of dynamicArray[i].EditItemMake" [value]="item.id">
                              {{item.itemName}}</option>
                          </select>
                        </td>
                        <td style="width:100px;">
                          <select style="width:100px;" class="form-control form-control-sm ItemCode"
                            [(ngModel)]="dynamicArray[i].ItemId" id="ddlItemId_{{i}}" (change)="ChangeEditItemCode(dynamicArray[i].ItemId,i)">
                            <option class="dropdown-item" [value]="0">Select</option>
                            <option *ngFor="let item of dynamicArray[i].EditItemCode" [value]="item.id">
                              {{item.itemName}}</option>
                          </select>
                        </td>
                        <!-- <td style="width:80px;" *ngIf="ItemAddrowhideshow"> -->
                          <td style="width:80px;" *ngIf="EquipmentTypeHideShow">
                          <select class="form-control form-control-sm EqType" id="ddlEqTypeId_{{i}}"
                            [(ngModel)]="dynamicArray[i].EqTypeId"
                            (change)="ChangeEqupmnet(dynamicArray[i].EqTypeId,i)" readonly>
                            <option class="dropdown-item" [value]="0">Select</option>
                            <option *ngFor="let item of EquipmentTypeList" [value]="item.id">{{item.itemName}}</option>
                          </select>
                        </td>
                        <td style="width:180px;">
                          <textarea [(ngModel)]="dynamicArray[i].ItemDescription" readonly
                            class="form-control form-control-sm" type="text" style="text-align:center;"> </textarea>
                        </td>
                        <td style="width:auto;">
                          <textarea [(ngModel)]="dynamicArray[i].SubDescription"
                            class="form-control form-control-sm SubDescription" type="text"
                            style="text-align:center;"> </textarea>
                        </td>
                        <!-- <td style="width:auto;">
                          <input [(ngModel)]="dynamicArray[i].ReasonCode"
                            class="form-control form-control-sm ReasonCode" type="text" style="text-align:center;" />
                        </td>
                        <td style="width:100px;">
                          <div class="ng-autocomplete" style="width:100px;">
                            <ng-autocomplete [data]="AutoCompleteCustomerSiteIdList"
                              [searchKeyword]="CustomerSiteIdkeyword" (inputCleared)="ClearedCustomerSiteId(i)"
                              [(ngModel)]="dynamicArray[i].ValueCustomerSite"
                              (selected)='SelectCustomerSiteId($event,i)'
                              (inputChanged)='onChangeSearchCustomerSiteId($event,i)'
                              (inputFocused)='onFocusedCu($event)' [itemTemplate]="CuSiteIditemTemplate"
                              [notFoundTemplate]="CuSiteIdnotFoundTemplate" [debounceTime]="600" [minQueryLength]="2"
                              placeHolder="Search CustomerSiteId">
                            </ng-autocomplete>
                            <ng-template #CuSiteIditemTemplate let-item>
                              <a [innerHTML]="item.CustomerSiteId"></a>
                            </ng-template>
                            <ng-template #CuSiteIdnotFoundTemplate let-notFound>
                              <div [innerHTML]="notFound"></div>
                            </ng-template>
                          </div>
                        </td>

                        <input [(ngModel)]="dynamicArray[i].SiteId" class="form-control form-control-sm " type="hidden"
                          style="text-align:center;" />
                        <input [(ngModel)]="dynamicArray[i].SiteName" class="form-control form-control-sm "
                          type="hidden" style="text-align:center;" />
                        <input [(ngModel)]="dynamicArray[i].CustomerSiteId" class="form-control form-control-sm "
                          type="hidden" style="text-align:center;" />
                        <input [(ngModel)]="dynamicArray[i].CustomerId" class="form-control form-control-sm "
                          type="hidden" style="text-align:center;" />
                        <td style="width:100px;">
                          <div class="ng-autocomplete" style="width:100px;">
                            <ng-autocomplete [data]="AutoCompleteSiteCustomerList" [searchKeyword]="SiteCustomer"
                              (inputCleared)="searchClearedSiteCustomer(i)" [(ngModel)]="dynamicArray[i].ValueSiteName"
                              (selected)='SelectSiteName($event,i)' (inputChanged)='onChangeSiteNameSearch($event,i)'
                              (inputFocused)='onFocusedCu($event)' [itemTemplate]="itemTemplate"
                              [notFoundTemplate]="notFoundTemplate" [debounceTime]="600" [minQueryLength]="2"
                              placeHolder="Search SiteName">
                            </ng-autocomplete>
                            <ng-template #itemTemplate let-item>
                              <a [innerHTML]="item.SiteName"></a>
                            </ng-template>
                            <ng-template #notFoundTemplate let-notFound>
                              <div [innerHTML]="notFound"></div>
                            </ng-template>
                          </div>
                        </td>
                        <td style="width:80px;">
                          <input [(ngModel)]="dynamicArray[i].CustomerCode"
                            class="form-control form-control-sm CustomerCode" type="text" style="text-align:center;" />
                        </td> -->


                        <td style="width:50px;">
                          <select class="form-control form-control-sm UnitName" id="ddlUnitName_{{i}}"
                            [(ngModel)]="dynamicArray[i].UnitName" [disabled]="IsUnitDisabled" (change)="ChangeUnit(dynamicArray[i].UnitName,i)">
                            <option class="dropdown-item" [value]="0">Select</option>
                            <option *ngFor="let item of dynamicArray[i].UnitList" [value]="item.Id">{{item.UnitName}}
                            </option>
                          </select>
                        </td>
                        <td *ngIf="IsHideQty">
                          <input style="width:80px;" class="form-control form-control-sm" readonly [(ngModel)]="dynamicArray[i].POQty" appCopyPastNumFloatValue type="text"
                            style="text-align:center;" />
                        </td>
                        <td style="width:50px;">
                          <input class="form-control form-control-sm ChallanQty" [disabled]="IsChallanQtyJobQty"
                            (blur)="ChallanQtyKeyPress(i)" [(ngModel)]="dynamicArray[i].ChallanQty"  appCopyPastNumFloatValue type="text" style="text-align:center;" />
                        </td>

                        <td style="width:120px;" *ngIf="IsHideQty">
                          <input class="form-control form-control-sm ReceivedQty" (blur)="ReceivedQtyKeyPress(dynamicArray[i].ReceivedQty,i)"
                            [(ngModel)]="dynamicArray[i].ReceivedQty" (blur)="OnblurReceivedQty(i)"  appCopyPastNumFloatValue type="text" style="text-align:center;" />
                          <label *ngIf="dynamicArray[i].HideShowConValue"  style="font-size: smaller;">{{dynamicArray[i].ConversionUnit}}-Qty<span style="color:red;"
                              class="Mandatoryfield"><b>*</b></span></label>
                          <input style="width:120px;" *ngIf="dynamicArray[i].HideShowConValue"  class="form-control form-control-sm ConversionValue"
                            [(ngModel)]="dynamicArray[i].ConversionValue" (blur)="OnblurConversionValue()"appCopyPastNumFloatValue type="text" style="text-align:center;" />
                          <input style="width:120px;" class="form-control form-control-sm hideIsConversion"
                            [(ngModel)]="dynamicArray[i].IsConversion" type="hidden" style="text-align:center;" />
                          <input style="width:120px;" class="form-control form-control-sm "[(ngModel)]="dynamicArray[i].HideConversionValue" type="hidden"
                            style="text-align:center;" />
                        </td>

                        <td style="width:60px;">
                          <input class="form-control form-control-sm AcceptedQty"id="ddlAcceptedQty_{{i}}"
                            [(ngModel)]="dynamicArray[i].AcceptedQty" (blur)="OnblurReceivedQty(i)"
                            (keyup)="AcceptedQtyOnblur(i)" appCopyPastNumFloatValue type="text"
                            style="text-align:center;" />
                        </td>
                       
                        <td style="width:60px;" *ngIf="IsHideQty">
                          <input class="form-control form-control-sm RejectedQty" (blur)="RejectedQtyKeyPress()"
                            [(ngModel)]="dynamicArray[i].RejectedQty" readonly appCopyPastNumFloatValue type="text"
                            style="text-align:center;" />
                        </td>
                        <td style="width:40px;" *ngIf="IsHideQty">
                          <input class="form-control form-control-sm ExcessShort"
                            [(ngModel)]="dynamicArray[i].ExcessShort" readonly (blur)="ExcessShortKeyPress()"
                            type="text" style="text-align:center;" />
                        </td>
                        <td style="width:120px;">
                          <input class="form-control form-control-sm itmsRate" [(ngModel)]="dynamicArray[i].Rate"
                             (blur)="ItemRateOnblur()" (keypress)="RateKeyPress()"id="txtRate_{{i}}"
                            appCopyPastNumFloatValue type="text" style="text-align:center;" />
                        </td>
                        <!-- [disabled]="IsRateDesabled" -->
                        <td style="width:120px;">
                          <input class="form-control form-control-sm itmsTotalAmount" readonly
                            [(ngModel)]="dynamicArray[i].TotalAmount" type="text"
                            style="text-align:center;width: 120px;" />
                        </td>
                        <td style="width:100px;">
                          <input class="form-control form-control-sm" [(ngModel)]="dynamicArray[i].FreightCharge"
                            (blur)="ItemRateOnblur()" appCopyPastNumFloatValue type="text"
                            style="text-align:center;width:120px;" />
                        </td>

                        <td style="width:100px;">
                          <input class="form-control form-control-sm"
                            [(ngModel)]="dynamicArray[i].TotalAmountWithFreightCharge" appCopyPastNumFloatValue
                            type="text" style="text-align:center;width:100px;" readonly />
                        </td>
                        <td style="width:120px;">
                          <select style="width:120px;" (change)="ItemRateOnblur()"
                            class="form-control form-control-sm TaxWith" id="TaxWith_{{i}}"
                            [(ngModel)]="dynamicArray[i].TaxWith">
                            <option class="dropdown-item" [value]="1">Total Amount</option>
                            <option class="dropdown-item" [value]="2">Basic Value</option>
                          </select>
                          <!-- <input  class="form-control form-control-sm itmsRate" [(ngModel)]="dynamicArray[i].SGSTRate"  (blur)="ItemRateOnblur()" (keypress)="RateKeyPress()" appCopyPastNumFloatValue  type="text" style="text-align:center;width: 85px;"/>     -->
                        </td>
                        <td style="width:120px;">
                          <input class="form-control form-control-sm itmsRate" [(ngModel)]="dynamicArray[i].SGSTRate"
                            (blur)="ItemRateOnblur()" (keypress)="RateKeyPress()" appCopyPastNumFloatValue type="text"
                            style="text-align:center;width: 85px;" />
                        </td>
                        <td style="width:120px;">
                          <input class="form-control form-control-sm itmsRate" [(ngModel)]="dynamicArray[i].SGST"
                            disabled="disabled" (blur)="ItemRateOnblur()" (keypress)="RateKeyPress()"
                            appCopyPastNumFloatValue type="text" style="text-align:center;width: 85px;" />
                        </td>
                        <td style="width:120px;">
                          <input class="form-control form-control-sm itmsRate" [(ngModel)]="dynamicArray[i].CGSTRate"
                            disabled="disabled" (blur)="ItemRateOnblur()" (keypress)="RateKeyPress()"
                            appCopyPastNumFloatValue type="text" style="text-align:center;width: 85px;" />
                        </td>
                        <td style="width:120px;">
                          <input class="form-control form-control-sm itmsRate" [(ngModel)]="dynamicArray[i].CGST"
                            disabled="disabled" (blur)="ItemRateOnblur()" (keypress)="RateKeyPress()"
                            appCopyPastNumFloatValue type="text" style="text-align:center;width: 85px;" />
                        </td>
                        <td style="width:120px;">
                          <input class="form-control form-control-sm itmsRate" [(ngModel)]="dynamicArray[i].IGSTRate"
                            (blur)="ItemRateOnblur()" (keypress)="RateKeyPress()" appCopyPastNumFloatValue type="text"
                            style="text-align:center;width: 85px;" />
                        </td>
                        <td style="width:120px;">
                          <input class="form-control form-control-sm itmsRate" [(ngModel)]="dynamicArray[i].IGST"
                            disabled="disabled" (blur)="ItemRateOnblur()" (keypress)="RateKeyPress()"
                            appCopyPastNumFloatValue type="text" style="text-align:center;width: 85px;" />
                        </td>
                        <td style="width:120px;">
                          <input class="form-control form-control-sm itmsRate" [(ngModel)]="dynamicArray[i].TCSRate"
                            (blur)="ItemRateOnblur()" (keypress)="RateKeyPress()" appCopyPastNumFloatValue type="text"
                            style="text-align:center;width: 85px;" />
                        </td>
                        <td style="width:120px;">
                          <input class="form-control form-control-sm itmsRate" [(ngModel)]="dynamicArray[i].TCS"
                             (blur)="ItemRateOnblur()" (keypress)="RateKeyPress()"
                            appCopyPastNumFloatValue type="text" style="text-align:center;width: 85px;" />
                        </td>
                        <td style="width:120px;">
                          <input class="form-control form-control-sm itmsTotalAmount" readonly
                            [(ngModel)]="dynamicArray[i].TotalInvoiceValue" type="text"
                            style="text-align:center;width: 120px;" />
                        </td>
                        <td style="width:60px;text-align: center;">
                          <a (click)="showModal(dynamicArray[i].AcceptedQty, i)">
                            <i _ngcontent-dpu-c137="" class="fa fa-plus"></i>
                          </a>
                        </td>
                        <!-- <td>
                          <input type="file" name="FaultyImage" [(ngModel)]="dynamicArray[i].FaultyFile" id="fileImage"
                            style="width: 120px;" multiple #filePicker (change)="FaultyImageFileChange($event,i)"
                            accept="application/pdf, image/jpeg" />
                        </td> -->
    
                        <td *ngIf="Correctioncolumnhideandshow">
                          <select style="width:120px;" (change)="ChangeCorrectionEntryReason(i)" class="form-control form-control-sm TaxWith" id="ddlCentryReason_{{i}}"
                            [(ngModel)]="dynamicArray[i].IsCorrectionEntryReason" *ngIf="dynamicArray[i].IsCorrection">
                            <option class="dropdown-item" [value]="0">Select</option>
                            <option *ngFor="let itemC of CorretionEntryReasonDetail" [value]="itemC.Id">
                              {{itemC.ReasonName}}</option>
                          </select>
                        </td>
                        <td *ngIf="Correctioncolumnhideandshow">
                          <textarea class="form-control form-control-sm "id="txtCorrectionEntryRemarks_{{i}}"
                            [(ngModel)]="dynamicArray[i].CorrectionEntryRemarks" type="text" (keypress)="ClickCorrectionEntryRemarks(i)"
                            style="text-align:center;width: 120px;" *ngIf="dynamicArray[i].IsCorrection"></textarea>
                        </td>
                        <td *ngIf="Correctioncolumnhideandshow">
                          <button type="submit" [disabled]="dynamicArray[i].IsCorrectionDisabled"
                            class="btn btn-sm btn-success" *ngIf="dynamicArray[i].IsCorrection"
                            (click)="ConfirmCorrectionPopup(i)">Update </button>
                        </td>
                      </tr>
                      <tr>
                        <td></td>
                        <td *ngIf="Correctioncolumnhideandshow"></td>
                        <td>Total Gross</td>
                        <td colspan="3"></td>
                        <td *ngIf="ItemAddrowhideshow"></td>
                        <td *ngIf="IsHideQty"></td>
                        <td *ngIf="IsHideQty"></td>
                        <td style="text-align:center;">{{totalSumAcceptedQty}} </td>
                        <td></td>
                        <td></td>
                        <td></td>
                        <td></td>
                        <td></td>
                        <td></td>

                        <td style="text-align:center;">{{totalSumAmount}} </td>
                        <td></td>
                        <td></td>
                        <td></td>
                        <td></td>
                        <td></td>
                        <td></td>
                        <td></td>
                        <td></td>
                        <td></td>
                        
                        <td *ngIf="IsHideQty"></td>
                        <td *ngIf="IsHideQty"></td>
                        <td style="text-align:center;">{{GrandAllSumtotalInvoiceValue}}</td>
                        <td></td>
                        
                        <td *ngIf="Correctioncolumnhideandshow"></td>
                        <td *ngIf="Correctioncolumnhideandshow"></td>
                        <td *ngIf="Correctioncolumnhideandshow"></td>
                        
                      </tr>
                      <tr *ngIf="Addrowhideandshow">
                        <td (click)="addRow()">
                          <i class="fa fa-plus"></i>
                        </td>
                      </tr>
                    </tbody>
                  </table>
                </div>

                <br>

                <div class="row mb-1">
                  <label class="col-form-label-xs col-sm-1">Dispatch by <span style="color:red;"
                      class="Mandatoryfield"><b>*</b></span></label>
                  <div class="col-sm-2">
                    <select class="form-control form-control-sm" [(ngModel)]="model.ddlDespatchby" 
                    (change)="ChangeDespatchby(model.ddlDespatchby)">
                      <option class="dropdown-item" value="1">By Transport</option>
                      <option class="dropdown-item" value="2">By Hand</option>
                      <option class="dropdown-item" value="3">By Courier</option>
                    </select>
                  </div>
                  <!-- <label class="col-form-label-xs col-sm-1">Select Transporter<span style="color: red;"
                      class="Mandatoryfield"><b>*</b></span></label>
                  <div class="col-sm-2">
                    <select class="form-control form-control-sm" id="txtTransporterId" [(ngModel)]="model.TransporterId"
                      (change)="ChangeTransporter(model.TransporterId)">
                      <option class="dropdown-item" value="">Select</option>
                      <option *ngFor="let item of TransporterTypeDetail" [value]="item.id">{{item.TransporterName}}
                      </option>
                    </select>
                  </div> -->
                  <label class="col-form-label-xs col-sm-1" *ngIf="IsTransporter">Transporter Name<span
                      style="color: red;" class="Mandatoryfield"><b>*</b></span></label>
                  <div class="col-sm-2" *ngIf="IsTransporter">
                    <input type="text" id="txtTransporterName" rows="2" autocomplete="off"
                      [(ngModel)]="model.TransporterName" placeholder="" (keypress)="TransporterNameKeyPress()"
                      class="form-control form-control-sm"/>
                  </div>
                  <label class="col-form-label-xs col-sm-1" *ngIf="IsTransporter">Transporter GST No<span
                      style="color: red;" class="Mandatoryfield"><b>*</b></span></label>
                  <div class="col-sm-2" *ngIf="IsTransporter">
                    <input type="text" id="txtTransporterGSTNo" autocomplete="off" maxlength="15"
                      [(ngModel)]="model.TransporterGSTNo" placeholder="" (keypress)="TransporteGSTNoKeyPress()"
                      class="form-control form-control-sm" />
                  </div>
                  <label class="col-form-label-xs col-sm-1" *ngIf="IsByHand">Sender Name<span
                    style="color: red;" class="Mandatoryfield"><b></b></span></label>
                <div class="col-sm-2" *ngIf="IsByHand">
                  <input type="text" id="txtSenderName" autocomplete="off" 
                  [(ngModel)]="model.SenderName" placeholder="" (keypress)="SenderNameKeyPress()"
                  class="form-control form-control-sm" />
                </div>
                  <label class="col-form-label-xs col-sm-1" *ngIf="IsByHand">Sender Phone No<span
                    style="color: red;" class="Mandatoryfield"><b></b></span></label>
                <div class="col-sm-2" *ngIf="IsByHand">
                  <input type="text" id="txtSenderNo" autocomplete="off" maxlength="12"
                    [(ngModel)]="model.SenderNo" placeholder="" (keypress)="senderNoKeyPress()"
                    class="form-control form-control-sm" />
                </div>

                <label class="col-form-label-xs col-sm-1" *ngIf="IsByHand">Sender Address<span
                  style="color: red;" class="Mandatoryfield"><b></b></span></label>
              <div class="col-sm-2" *ngIf="IsByHand">
                <textarea type="text" id="IsByHand" autocomplete="off"id="txtSenderAddress"
                    [(ngModel)]="model.SenderAddress" placeholder="" (keypress)="SenderAddressKeyPress()"
                    class="form-control form-control-sm"></textarea>
              </div>

              <label class="col-form-label-xs col-sm-1" *ngIf="IsCourier">Courier Company Name<span
                style="color: red;" class="Mandatoryfield"><b></b></span></label>
            <div class="col-sm-2" *ngIf="IsCourier">
              <input type="text" id="txtCourierCompanyName" autocomplete="off" 
              [(ngModel)]="model.CourierCompanyName" placeholder="" 
              class="form-control form-control-sm" />
            </div>
              <label class="col-form-label-xs col-sm-1" *ngIf="IsCourier">Courier Phone No<span
                style="color: red;" class="Mandatoryfield"><b></b></span></label>
            <div class="col-sm-2" *ngIf="IsCourier">
              <input type="text" id="txtCourierPhoneNo" autocomplete="off" maxlength="12"
                [(ngModel)]="model.CourierPhoneNo" placeholder="" 
                class="form-control form-control-sm" />
            </div>
            <label class="col-form-label-xs col-sm-1" *ngIf="IsCourier">Docket No<span
              style="color: red;" class="Mandatoryfield"><b></b></span></label>
          <div class="col-sm-2" *ngIf="IsCourier">
            <input type="text" id="txtDocketNo" autocomplete="off" 
              [(ngModel)]="model.DocketNo" placeholder="" 
              class="form-control form-control-sm" />
          </div>
                </div> 

                <div class="row mb-1">
                  <label class="col-form-label-xs col-sm-1" *ngIf="IsTransporter">Vehicle No<span style="color:red;"
                      class="Mandatoryfield" *ngIf="IsVehicleValidation"><b>*</b></span></label>
                  <div class="col-sm-2" *ngIf="IsTransporter">
                    <input type="text" id="txtVehicleNo" autocomplete="off" (keypress)="keyPressVehicleNo()"
                      [(ngModel)]="model.VehicleNo" class="form-control form-control-sm" placeholder="">
                  </div>
                  <label class="col-form-label-xs col-sm-1">Material received by<span style="color:red;"
                      class="Mandatoryfield"><b>*</b></span></label>
                  <div class="col-sm-2">
                    <input type="text" id="txtIndentorName" autocomplete="off" (keypress)="keyPressIndentorName()"
                      [(ngModel)]="model.IndentorName" class="form-control form-control-sm" placeholder="">
                  </div>
                  <label class="col-form-label-xs col-sm-1" *ngIf="IsTransporter">Bilty No<span style="color:red;"
                      class="Mandatoryfield"><b>*</b></span></label>
                  <div class="col-sm-2" *ngIf="IsTransporter">
                    <input type="text" id="txtLRNo" autocomplete="off" (keypress)="keyPressLRNo()"
                      [(ngModel)]="model.LRNo" class="form-control form-control-sm" placeholder="">
                  </div>
                  <label class="col-form-label-xs col-sm-1" *ngIf="IsTransporter">Bilty Date <span style="color:red;"
                      class="Mandatoryfield"><b>*</b></span></label>
                  <div class="col-sm-2" *ngIf="IsTransporter">

                    <div class="input-group" (mouseenter)="onKeypressLRdate($event)">
                      <input class="form-control form-control-sm" id="txtLRdate" readonly name="dpLRDate"
                        [(ngModel)]="model.LRdate" autocomplete="off" ngbDatepicker #dLRDate="ngbDatepicker">
                      <div class="input-group-append">
                        <span class="input-group-text" (click)="dLRDate.toggle()"><i
                            class="far fa-calendar-alt"></i></span>
                      </div>
                    </div>
                  </div>

                </div>
                <div class="row mb-1">


                  <label class="col-form-label-xs col-sm-1" *ngIf="IsTransporter">Bilty Pdf/Image<span style="color:red;"
                      class="Mandatoryfield"><b>*</b></span><a *ngIf="IsLRFile" (click)="LRPdfViewfileClick()"
                      title="File View" style="color:green"><i class="fa fa-eye"></i></a></label>
                  <div class="col-sm-2" *ngIf="IsTransporter">
                    <input type="file" id="LRPdfFileimage" autocomplete="off" #LRfilePicker
                      (change)="onLRPdfFileChange($event)" class="form-control form-control-sm"
                      accept="application/pdf, image/jpeg" placeholder="Choose file">
                  </div>
                  <label class="col-form-label-xs col-sm-1">Remarks</label>
                  <div class="col-sm-2">
                    <textarea type="text" id="txtRemarks" autocomplete="off" [(ngModel)]="model.Remarks"
                      class="form-control form-control-sm" placeholder=""></textarea>
                  </div>
                </div>

              </div>
            </div>


          </div>
        </div>
        <div *ngIf="IsPageActive">
          <app-stndetail *ngIf="IsPageActive" (btnclick)="IsPageActive=false;isShownPOEdit=true"></app-stndetail>
        </div>

<!-- GRN PDF Preview Page -->
        <div class="row" *ngIf="isPdfPreview">
          <div class="col-sm-12 col-md-12">
            <div class="card card-success">
              <div class="card-body">

                <div class="row mb-1">
                  <div class="col-sm-12 content-header bg-light">
                    <div class="col-sm-12">
                      <button type="button" class="btn btn-sm btn-success" (click)="BackPreviewPage()"><i
                          class="fa fa-arrow-circle-left"></i> Back</button>
                    </div>
                  </div>
                </div>

                <div class="row mb-1">
                  <div class="col-form-label-xs col-sm-1">
                    <label class="col-form-label-xs col-sm-12">{{model.GRNByNo}} </label>
                  </div>

                  <div class="col-sm-2">
                    <label class="col-form-label-xs col-sm-12" *ngIf="IsGRNByPO"><b>{{model.Pono}}</b> </label>
                    <label class="col-form-label-xs col-sm-12" *ngIf="IsGRNByDispatch"><b>{{model.Document}}</b>
                    </label>

                  </div>

                  <div class="col-sm-1"></div>
                  <div class="col-sm-2">
                    <!-- <div class="btn-group btn-group-xs">                                          
                                   <label *ngIf="IsGRNByPO"><i class="fa fa-eye" aria-hidden="true" (click)="SearchGRNCRNPO()"></i> View</label>
                                   <label *ngIf="IsGRNByDispatch"><i class="fa fa-eye" aria-hidden="true" (click)="SearchDispatchfile()"></i> View</label>
                                  </div> -->
                  </div>
                  <label class="col-form-label-xs col-sm-1">{{DATEType}}</label>
                  <label class="col-form-label-xs col-sm-2" *ngIf="IsGRNByPO"><b>{{model.PreviewPODate}}</b> </label>
                  <label class="col-form-label-xs col-sm-2" *ngIf="IsGRNByDispatch"><b>{{model.PreviewDocumentDate}}</b>
                  </label>

                  <label class="col-form-label-xs col-sm-1">GRN No</label>
                  <div class="col-sm-2">
                    <label class="col-form-label-xs col-sm-2"><b>{{model.GRNCRNNo}}</b> </label>
                  </div>
                </div>

                <div class="row mb-1">
                  <label class="col-form-label-xs col-sm-1">GRN Date</label>
                  <div class="col-sm-2">
                    <label class="col-form-label-xs "><b>{{model.PreviewGRNdate}}</b> </label>
                  </div>

                  <label class="col-form-label-xs col-sm-1">Supplier Name</label>
                  <div class="col-sm-2">
                    <label class="col-form-label-xs"><b>{{model.SupplierName}}</b> </label>
                  </div>

                  <label class="col-form-label-xs col-sm-1">Supplier Address</label>
                  <div class=" col-sm-2">
                    <label class="col-form-label-xs"><b>{{model.SupplierAddress}}</b> </label>
                  </div>

                  <label class="col-form-label-xs col-sm-1">WH State</label>
                  <div class="col-sm-2">
                    <label class="col-form-label-xs "><b>{{model.WHStateName}}</b> </label>
                  </div>
                </div>

                <div class="row mb-1">
                  <label class="col-form-label-xs col-sm-1">WH Name</label>
                  <div class="col-sm-2">
                    <label class="col-form-label-xs "><b>{{model.WHName}}</b> </label>
                  </div>

                  <label class="col-form-label-xs col-sm-1">WH Address</label>
                  <div class="col-sm-2">
                    <label class="col-form-label-xs"><b>{{model.WHAddress}}</b> </label>
                  </div>

                  <label class="col-form-label-xs col-sm-1">EwayBill No</label>
                  <div class=" col-sm-2">
                    <label class="col-form-label-xs"><b>{{model.EwayBillNo}}</b> </label>
                  </div>

                  <label class="col-form-label-xs col-sm-1">EwayBill Date</label>
                  <div class="col-sm-2">
                    <label class="col-form-label-xs "><b>{{model.PreviewEwayBillDate}}</b> </label>
                  </div>
                </div>

                <div class="row mb-1">
                  <label class="col-form-label-xs col-sm-1">Select Inv/Challan No</label>
                  <div class="col-sm-2">
                    <label class="col-form-label-xs "><b>{{model.PreviewSelectInvoice}}</b> </label>
                  </div>

                  <label class="col-form-label-xs col-sm-1">Inv/Challan No</label>
                  <div class="col-sm-2">
                    <label class="col-form-label-xs"><b>{{model.ChallanNo}}</b> </label>
                  </div>

                  <label class="col-form-label-xs col-sm-1">Inv/Challan Date</label>
                  <div class=" col-sm-2">
                    <label class="col-form-label-xs"><b>{{model.PreviewInvoiceDate}}</b> </label>
                  </div>

                  <label class="col-form-label-xs col-sm-1">Inv/Challan Amount</label>
                  <div class="col-sm-2">
                    <label class="col-form-label-xs "><b>{{model.InvoiceAmount}}</b> </label>
                  </div>
                </div>

                <div class="row mb-1">
                  <label class="col-form-label-xs col-sm-1">Gate Entry No</label>
                  <div class="col-sm-2">
                    <label class="col-form-label-xs "><b>{{model.GateEntryNo}}</b> </label>
                  </div>

                  <label class="col-form-label-xs col-sm-1">Gate Entry Date</label>
                  <div class="col-sm-2">
                    <label class="col-form-label-xs"><b>{{model.PreviewGateDate}}</b> </label>
                  </div>

                  <label class="col-form-label-xs col-sm-1">Dispatch Date</label>
                  <div class=" col-sm-2">
                    <label class="col-form-label-xs"><b>{{model.PreviewDispatchDate}}</b> </label>
                  </div>


                </div>
                <!-- <input type="hidden" id="" [(ngModel)]="model.Pono"  readonly    class="form-control form-control-sm" placeholder=""> 
                    <input type="hidden" id="" [(ngModel)]="model.Document"  readonly    class="form-control form-control-sm" placeholder=""> 
                    -->


                <fieldset class="scheduler-border">
                  <legend class="scheduler-border">Item Details</legend>
                  <div class="col-sm-12" style=" overflow:auto;">
                    <table id="tblOne" class="table table-striped table-bordered">
                      <thead>
                        <tr>
                          <th>Item Name<span style="color:red;" class="Mandatoryfield"><b></b></span></th>
                          <th>Item Make<span style="color:red;" class="Mandatoryfield"><b></b></span></th>
                          <th>Part No<span style="color:red;" class="Mandatoryfield"><b></b></span></th>
                          <!-- <th *ngIf="ItemAddrowhideshow">Equipment Type<span style="color:red;"
                              class="Mandatoryfield"><b></b></span></th> -->
                          <th *ngIf="EquipmentTypeHideShow">Equipment Type<span style="color:red;"
                                class="Mandatoryfield"><b></b></span></th>
                          <th>Item Description<span class="Mandatoryfield"><b></b></span></th>
                          <th>Sub Description<span class="Mandatoryfield"><b></b></span></th>
                          <!-- <th>Reason Code<span class="Mandatoryfield"><b></b></span></th>
                          <th>Site ID<span class="Mandatoryfield"><b></b></span></th>
                          <th>Site Name<span class="Mandatoryfield"><b></b></span></th>
                          <th>Customer Code<span class="Mandatoryfield"><b></b></span></th> -->
                          <th>Unit<span class="Mandatoryfield" style="color:red;"><b></b></span></th>
                          <th *ngIf="IsHideQty">{{PoQtyLabel}}<span class="Mandatoryfield"><b></b></span></th>
                          <!-- <th *ngIf="IsHideQty">POQty<span class="Mandatoryfield"><b></b></span></th> -->
                          <th>{{ChangeLabelQty}}<span style="color:red;" class="Mandatoryfield"><b></b></span></th>
                          <th *ngIf="IsHideQty">ReceivedQty<span style="color:red;"
                              class="Mandatoryfield"><b></b></span></th>
                          <th>Accepted (OK) Qty<span style="color:red;" class="Mandatoryfield"><b></b></span></th>
                          <th *ngIf="IsHideQty"> Damage Qty<span class="Mandatoryfield"><b></b></span></th>
                          <th *ngIf="IsHideQty">Excess/ Short<span class="Mandatoryfield"><b></b></span></th>
                          <th>Rate<span style="color:red;" class="Mandatoryfield"><b></b></span></th>
                          <th vlign="center"> Basic Value<span style="color:red;" class="Mandatoryfield"><b></b></span>
                          </th>
                          <th vlign="center">Freight Charge</th>
                          <th vlign="center">Total Amount</th>

                          <th vlign="center">SGST Rate(%)<span style="color:red;" class="Mandatoryfield"><b></b></span>
                          </th>
                          <th vlign="center">SGST<span style="color:red;" class="Mandatoryfield"><b></b></span></th>

                          <th vlign="center">CGST Rate(%)</th>
                          <th vlign="center">CGST<span style="color:red;" class="Mandatoryfield"><b></b></span></th>
                          <th vlign="center">IGST Rate(%)<span style="color:red;" class="Mandatoryfield"><b></b></span>
                          </th>
                          <th vlign="center">IGST<span style="color:red;" class="Mandatoryfield"><b></b></span></th>
                          <th vlign="center">TCS Rate(%)<span style="color:red;" class="Mandatoryfield"><b></b></span>
                          </th>
                          <th vlign="center">TCS<span style="color:red;" class="Mandatoryfield"><b></b></span></th>
                          <th vlign="center">Total Invoice Value <span style="color:red;"
                              class="Mandatoryfield"><b></b></span></th>
                        </tr>
                      </thead>
                      <tbody>
                        <tr *ngFor="let dynamic of dynamicArray; let i = index">
                          <td style="width:80px;">
                            <label style="text-align:center">{{dynamicArray[i].ItemName}}</label>
                          </td>
                          <td style="width:80px;">
                            <label style="text-align:center">{{dynamicArray[i].MakeName}}</label>
                          </td>
                          <td style="width:80px;">
                            <label style="text-align:center">{{dynamicArray[i].ItemCode}}</label>
                          </td>
                          <!-- <td style="width:100px;" *ngIf="ItemAddrowhideshow"> -->
                            <td style="width:100px;" *ngIf="EquipmentTypeHideShow">
                            <label style="text-align:center">{{dynamicArray[i].EqpType}}</label>
                          </td>

                          <td style="width:280px;">
                            <label style="text-align:center">{{dynamicArray[i].ItemDescription}}</label>
                          </td>
                          <td style="width:280px;">
                            <label style="text-align:center">{{dynamicArray[i].SubDescription}}</label>
                          </td>
                          <!-- <td style="width:280px;">
                            <label style="text-align:center">{{dynamicArray[i].ReasonCode}}</label>
                          </td>
                          <td style="width:50px;">
                            <label style="text-align:center">{{dynamicArray[i].ValueCustomerSite}}</label>
                          </td>
                          <td style="width:80px;">
                            <label style="text-align:center">{{dynamicArray[i].ValueSiteName}}</label>
                          </td>
                          <td style="width:100px;">
                            <label style="text-align:center">{{dynamicArray[i].CustomerCode}}</label>
                          </td> -->
                          <td style="width:100px;">
                            <label style="text-align:center">{{dynamicArray[i].Unit}}</label>
                          </td>
                          <td style="width:80px;" *ngIf="IsHideQty">
                            <label style="text-align:center">{{dynamicArray[i].POQty}}</label>
                          </td>
                          <td style="width:80px;">
                            <label style="text-align:center">{{dynamicArray[i].ChallanQty}}</label>
                          </td>
                          <td style="width:80px;" *ngIf="IsHideQty">
                            <label style="text-align:center">{{dynamicArray[i].ReceivedQty}}</label>
                          </td>

                          <td style="width:100px;">
                            <label style="text-align:center">{{dynamicArray[i].AcceptedQty}}</label>
                          </td>
                          <td style="width:100px;" *ngIf="IsHideQty">
                            <label style="text-align:center">{{dynamicArray[i].RejectedQty}}</label>
                          </td>
                          <!-- <td style="width:100px;">    
                                  <select class="form-control form-control-sm NewEqTypeId" id="ddlNewEqTypeId_{{i}}" [(ngModel)]="dynamicArray[i].NewEqTypeId" (change)="ChangeNewType()" >  
                                    <option class="dropdown-item" [value]="0">Select</option>
                                    <option *ngFor="let item of FilterNewTypeList" [value]="item.id" >{{item.itemName}}</option>    
                                  </select>
                                </td> -->
                          <td style="width:280px;" *ngIf="IsHideQty">
                            <label style="text-align:center">{{dynamicArray[i].ExcessShort}}</label>
                          </td>
                          <td style="width:280px;">
                            <label style="text-align:center">{{dynamicArray[i].Rate}}</label>
                          </td>
                          <td style="width:280px;">
                            <label style="text-align:center">{{dynamicArray[i].TotalAmount}}</label>
                          </td>
                          <td style="width:280px;">
                            <label style="text-align:center">{{dynamicArray[i].FreightCharge}}</label>
                          </td>
                          <td style="width:280px;">
                            <label style="text-align:center">{{dynamicArray[i].TotalAmountWithFreightCharge}}</label>
                          </td>

                          <td style="width:280px;">
                            <label style="text-align:center">{{dynamicArray[i].SGSTRate}}</label>
                          </td>
                          <td style="width:280px;">
                            <label style="text-align:center">{{dynamicArray[i].SGST}}</label>
                          </td>
                          <td style="width:280px;">
                            <label style="text-align:center">{{dynamicArray[i].CGSTRate}}</label>
                          </td>
                          <td style="width:280px;">
                            <label style="text-align:center">{{dynamicArray[i].CGST}}</label>
                          </td>
                          <td style="width:280px;">
                            <label style="text-align:center">{{dynamicArray[i].IGSTRate}}</label>
                          </td>
                          <td style="width:280px;">
                            <label style="text-align:center">{{dynamicArray[i].IGST}}</label>
                          </td>
                          <td style="width:280px;">
                            <label style="text-align:center">{{dynamicArray[i].TCSRate}}</label>
                          </td>
                          <td style="width:280px;">
                            <label style="text-align:center">{{dynamicArray[i].TCS}}</label>
                          </td>
                          <td style="width:280px;">
                            <label style="text-align:center">{{dynamicArray[i].TotalInvoiceValue}}</label>
                          </td>

                        </tr>

                      </tbody>
                    </table>

                  </div>
                </fieldset>

                <br>
                <div class="row mb-1">
                  <label class="col-form-label-xs col-sm-1">Dispatch by</label>
                  <div class="col-sm-2">
                    <label class="col-form-label-xs "><b>{{model.PreviewDespatchby}}</b> </label>
                  </div>

                  <label class="col-form-label-xs col-sm-1">Select Transporter</label>
                  <div class="col-sm-2">
                    <label class="col-form-label-xs"><b>{{model.PreviewSelectTransporter}}</b> </label>
                  </div>

                  <label class="col-form-label-xs col-sm-1">Transporter Name</label>
                  <div class=" col-sm-2">
                    <label class="col-form-label-xs"><b>{{model.TransporterName}}</b> </label>
                  </div>

                  <label class="col-form-label-xs col-sm-1">Transporter GST No</label>
                  <div class="col-sm-2">
                    <label class="col-form-label-xs "><b>{{model.TransporterGSTNo}}</b> </label>
                  </div>
                </div>

                <div class="row mb-1">
                  <label class="col-form-label-xs col-sm-1">Vehicle No</label>
                  <div class="col-sm-2">
                    <label class="col-form-label-xs "><b>{{model.VehicleNo}}</b> </label>
                  </div>

                  <label class="col-form-label-xs col-sm-1">Material received by</label>
                  <div class="col-sm-2">
                    <label class="col-form-label-xs"><b>{{model.IndentorName}}</b> </label>
                  </div>

                  <label class="col-form-label-xs col-sm-1">LR No</label>
                  <div class=" col-sm-2">
                    <label class="col-form-label-xs"><b>{{model.LRNo}}</b> </label>
                  </div>

                  <label class="col-form-label-xs col-sm-1">LR Date</label>
                  <div class="col-sm-2">
                    <label class="col-form-label-xs "><b>{{model.PreviewLRDate}}</b> </label>
                  </div>
                </div>

              </div>


            </div>
          </div>
        </div>
      </div>
    </section>
  </div>
</div>

<div class="modal fade" id="myModal" data-backdrop="static" data-keyboard="false">
  <div class="modal-dialog modal-sm">
    <div class="modal-content">
      <!-- Modal Header -->
      <div class="modal-header">
        <h6 class="modal-title">Serial Number({{headerItemName}})
        </h6>
      </div>
      <!-- Modal body -->
      <div class="modal-body">
        <table style="width: 100%;" class="table table-striped table-bordered">
          <thead>
            <th>Qty</th>
            <th>Initial Range</th>
            <th>Last Range</th>
          </thead>
          <tbody>
            <tr>
              <td>
                {{strcount}}
              </td>
              <td>
                <input class="form-control form-control-sm itmsRate" [(ngModel)]="firstValue" (blur)="initialsrn()"
                  type="text" style="text-align:center;" />
              </td>
              <td>
                <input class="form-control form-control-sm itmsRate" [(ngModel)]="lastValue" (blur)="initialsrn()"
                  type="text" style="text-align:center;" />
              </td>
            </tr>
          </tbody>
        </table>
        <table class="table table-striped table-bordered" style="width: 100%;">
          <tr>
            <td><label style="height: 9px;font-size: 13px;">Excel Upload for SerialNo</label></td>
            <td>
              <input type="file" #inputExcelOther class="form-control" (change)="SerialNoExcelUpload($event)"
                placeholder="Upload file"
                accept=".csv,application/vnd.openxmlformats-officedocument.spreadsheetml.sheet, application/vnd.ms-excel"
                multiple="false" />
            </td>
            <td>
              <button type="button" class="btn btn-sm btn-success" (click)="DownloadSerialNoExcelSample()"><i
                  class="fa fa-download">
                </i> Sample Excel</button>
            </td>
          </tr>
        </table>
        <div id="table-wrapper">
          <div id="table-scroll">
            <table class="table table-striped table-bordered" style="width: 100%;">
              <tr *ngFor="let value of srnlst; let i = index">
                <td>
                  {{i+1}}
                </td>
                <td colspan="2">
                  <input class="form-control form-control-sm itmsRate" [(ngModel)]="srnlst[i].InitialSrno" type="text"
                    style="text-align:center;" />
                </td>
              </tr>
            </table>
          </div>
        </div>
      </div>

      <!-- Modal footer -->
      <div class="modal-footer">
        <button type="button" class="btn btn-sm btn-danger" (click)="ClearSerialNoList()">
          <i class="fa fa-trash"></i>
          Clear</button>
        <button type="submit" class="btn btn-sm btn-success" (click)="addBtn()">
          <i class="fa fa-plus"></i> Add </button>
        <button type="button" class="btn btn-sm btn-danger" (click)="hideModal()">
          <i class="far fa-window-close"></i>
          Cancel</button>
      </div>
    </div>
  </div>
</div>

<div class="modal fade" id="bb" data-backdrop="static">
  <div class="modal-dialog modal-lg">
    <div class="modal-content">
      <!-- Modal Header -->
      <div class="modal-header">
        <h6 class="modal-title">Serial Number(BB)</h6>
        <table style="width: 30%;">
          <tr>
            <td align="right">
              Qty
            </td>
            <td align="right">{{strcount}}</td>
          </tr>
        </table>
      </div>
      <!-- Modal body -->
      <div class="modal-body">

        <div id="table-wrapper1" style="height:400px; overflow: auto;">
          <div id="table-scroll1">
            <table class="table table-striped table-bordered" style="width: 100%;">
              <tr>
                <td><label style="height: 9px;font-size: 13px;">Excel Upload for SerialNo</label></td>
                <td>
                  <input type="file" #inputExcelBB class="form-control" (change)="SerialNoExcelUpload($event)"
                    placeholder="Upload file"
                    accept=".csv,application/vnd.openxmlformats-officedocument.spreadsheetml.sheet, application/vnd.ms-excel"
                    multiple="false" />
                </td>
                <td>
                  <button type="button" class="btn btn-sm btn-success" (click)="DownloadSerialNoExcelSample()"><i
                      class="fa fa-download">
                    </i> Sample Excel</button>
                </td>
              </tr>
            </table>
            <table class="table table-striped table-bordered" style="width: 100%;">
              <tr *ngFor="let value of srnlst; let i = index">
                <td>
                  <label id="login"> {{i+1}}</label>
                </td>
                <td style="width:150px;">
                  <span>
                    <label style="height: 9px;
              font-size: 13px;">Initial Value</label>
                    <input class="form-control form-control-sm itmsRate" [(ngModel)]="srnlst[i].BBInitial"
                      placeholder="Initial value" type="text" style="text-align:center;width:143px;" />
                  </span>
                  <span style="margin-top:10px;">
                    <label style="height: 9px; font-size: 13px; margin-top: 6px;">Last Value</label>
                    <input class="form-control form-control-sm itmsRate" [(ngModel)]="srnlst[i].BBLast"
                      (blur)="bbChange(i)" placeholder="last value" type="text"
                      style="text-align:center;width:143px; margin-top: 10px;" />
                  </span>
                </td>
                <td>
                  <div style="width:100%;">
                    <span *ngFor="let value of srnlst[i].CellNos; let j = index"
                      style="display:inline-block; margin-left:5px;margin-bottom:10px;">
                      <input type="text" [(ngModel)]="srnlst[i].CellNos[j].CellValue" class="form-control"
                        style="width:115px; height:22px;font-size: 10;" />
                    </span>
                  </div>
                </td>
              </tr>
            </table>
          </div>
        </div>
      </div>

      <!-- Modal footer -->
      <div class="modal-footer">
        <button type="button" class="btn btn-sm btn-danger" (click)="ClearSerialNoList()">
          <i class="fa fa-trash"></i> Clear</button>
        <button type="submit" class="btn btn-sm btn-success" (click)="addBb()">
          <i class="fa fa-plus"></i> Add </button>
        <button type="button" class="btn btn-danger" (click)="hidebbModal()">
          <i class="fa fa-window-close"></i> Close</button>
      </div>
    </div>
  </div>
</div>


<div class="modal fade" id="confirm" data-backdrop="static" tabindex="-1" role="dialog" aria-labelledby="myModalLabel"
  aria-hidden="true">
  <div class="modal-dialog modal-sm">
    <div class="modal-content">
      <div class="modal-header">
        <h4 class="modal-title">Confirm !</h4>
      </div>
      <div class="modal-body">
        Please see preview before submit data by clicking on Preview Button.
        After submitting data will make it permanent change.
      </div>
      <div class="modal-footer">
        <button type="submit" *ngIf="IsNewPreview" class="btn btn-sm btn-success" (click)="SearchPdfPreview()"><i
            class="fa fa-print"></i>
          Preview </button>
        <button type="button" class="btn btn-danger" data-dismiss="modal">Close</button>
        <button type="button" class="btn btn-success" *ngIf="Save"[disabled]="loading" (click)="SaveGRNCRNDetail()">Save
          <i class="fa fa-spinner fa-spin" *ngIf="loading"></i>
        </button>
      </div>
    </div><!-- /.modal-content -->
  </div><!-- /.modal-dialog -->
</div><!-- /.modal -->
<div class="modal fade" id="Cancleconfirm" data-backdrop="static" tabindex="-1" role="dialog"
  aria-labelledby="myModalLabel" aria-hidden="true">
  <div class="modal-dialog modal-sm">
    <div class="modal-content">
      <div class="modal-header">
        <h4 class="modal-title">Confirm !</h4>
      </div>
      <div class="modal-body">
        Please confirm that you want to Cancel.
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-danger" data-dismiss="modal">Close</button>
        <button type="button" class="btn btn-success"*ngIf="Save" [disabled]="loading" (click)="UpadateCancelGRN()">Save
          <i class="fa fa-spinner fa-spin" *ngIf="loading"></i>
        </button>
      </div>
    </div><!-- /.modal-content -->
  </div><!-- /.modal-dialog -->
</div><!-- /.modal -->


<div class="modal fade" id="Validationerror" data-backdrop="static" tabindex="-1" role="dialog"
  aria-labelledby="myModalLabel" aria-hidden="true">
  <div class="modal-dialog modal-sm">
    <div class="modal-content">
      <div class="modal-header">
        <h4 class="modal-title">Error !</h4>
      </div>
      <div class="modal-body">
        {{ValidationerrorMessage}}
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-danger" data-dismiss="modal">Close</button>
      </div>
    </div><!-- /.modal-content -->
  </div><!-- /.modal-dialog -->
</div><!-- /.modal -->

<div class="modal fade" id="Correctionconfirm" data-backdrop="static" tabindex="-1" role="dialog"
  aria-labelledby="myModalLabel" aria-hidden="true">
  <div class="modal-dialog modal-sm">
    <div class="modal-content">
      <div class="modal-header">
        <h4 class="modal-title">Confirm !</h4>
      </div>
      <div class="modal-body">
        Please confirm do you want correction entry this line item.
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-danger" data-dismiss="modal">No</button>
        <button type="button" class="btn btn-success" (click)="UpadateCorrectionEntry()">Yes</button>
      </div>
    </div><!-- /.modal-content -->
  </div><!-- /.modal-dialog -->
</div><!-- /.modal -->